<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>MangaNinja</title>
<link href="./static/style.css" rel="stylesheet">
<script type="text/javascript" src="./static/jquery.mlens-1.0.min.js"></script> 
<script type="text/javascript" src="./static/jquery.js"></script>
</head>

<body>
<div class="content">
  <h1><strong>MangaNinja: Line Art Colorization with Precise<br>Reference Following</strong></h1>
  <p id="authors">
    <a href="https://johanan528.github.io/">Zhiheng Liu</a><sup>1,3*</sup> 
    <a href="https://felixcheng97.github.io/">Ka Leong Cheng</a><sup>2,4*</sup>
    <a href="https://xavierchen34.github.io/">Xi Chen</a><sup>1,3</sup>
    <a href="https://jiexiaou.github.io/">Jie Xiao</a><sup>3</sup>
    <a href="https://ken-ouyang.github.io/">Hao Ouyang</a><sup>4</sup>
    <a href="https://scholar.google.com/citations?user=Mo_2YsgAAAAJ&hl=zh-CN">Kai Zhu</a><sup>3</sup>
    <a href="https://scholar.google.com/citations?user=8zksQb4AAAAJ&hl=zh-CN">Yu Liu</a><sup>3</sup><br>
    <a href="https://shenyujun.github.io/">Yujun Shen</a><sup>4</sup>
    <a href="https://cqf.io/">Qifeng Chen</a><sup>2</sup>
    <a href="http://luoping.me/">Ping Luo</a><sup>1</sup><br>
    <br>
    <span style="font-size: 20px"><sup>1</sup>HKU &nbsp <sup>2</sup>HKUST &nbsp <sup>3</sup>Tongyi Lab &nbsp <sup>4</sup>Ant Group</span>
  </p>
  <video class="teaser-gif" autoplay controls muted loop playsinline width="100%">
    <source src="./static/videos/gallery.mp4" type="video/mp4">
  </video>
  <h3 style="text-align:center"><em>MangaNinja is a reference-based line art colorization method that enables precise matching and fine-grained interactive control.</em></h3>
  <font size="+2">
    <p style="text-align: center;">
      <a href="https://arxiv.org/abs/2501.08332" target="_blank">[Paper]</a>&nbsp;&nbsp;&nbsp;&nbsp;
      <a href="https://github.com/ali-vilab/MangaNinjia" target="_blank">[Code]</a>&nbsp;&nbsp;&nbsp;&nbsp;
      <a href="https://youtu.be/Hg24TUEzcMg" target="_blank">[Youtube]</a>&nbsp;&nbsp;&nbsp;&nbsp;
      <a href="static/bibtex.txt" target="_blank">[BibTeX]</a>
      <a href="https://huggingface.co/spaces/fffiloni/MangaNinja-demo" target="_blank">[HuggingFace Demo]</a>
    </p>
  </font>
</div>
<div class="content">
  <h2 style="text-align:center;">Abstract</h2>
  <p>
    Derived from diffusion models, <b><i>MangaNinja</i></b> specializes in the task of reference-guided line art colorization.
    We incorporate two thoughtful designs to ensure precise character detail transcription, including
    a patch shuffling module to facilitate correspondence learning between the reference color image and the target line art,
    and a point-driven control scheme to enable fine-grained color matching.
    Experiments on a self-collected benchmark demonstrate the superiority of our model over current solutions in terms of precise colorization.
    We further showcase the potential of the proposed interactive point control in handling challenging cases (<i>e.g.</i>, extreme poses and shadows), 
    cross-character colorization, multi-reference harmonization, <i>etc.</i>, beyond the reach of existing algorithms.
  </p>
</div>
<div class="content">
  <h2>Approach</h2>
  <p>
    We randomly select two frames from video data, using one frame as a reference
    image and extracting the line art from the other. Both frames are input into the Reference U-Net and the Denoising U-Net, respectively.
    To enhance the model's automatic matching and fine-grained control capabilities, we propose a series of training strategies, including
    progressive patch shuffling. Additionally, we employ an off-the-shelf model to extract matching points from the two frames, and these
    point maps are fed into the main branch through PointNet.
  </p>
  <img class="summary-img" src="./static/images/pipeline.jpg" style="width:100%;">
</div>
<div class="content">
  <h2>Results</h2>
  <p>
    We compare our method with the state-of-the-art non-generative colorization method BasicPBC, the
    consistency generation method IP-Adapter, and AnyDoor. The results demonstrate that our method significantly outperforms them in terms
    of colorization accuracy and generated image quality. Notably, our method does not use points for guidance in the generated results.
  </p>
  <img class="summary-img" src="./static/results/comparison.jpg" style="width:100%;">
</div>
<div class="content">
  <h2>Challenging Cases</h2>
  <p>
    <b>Visualization of varying poses or missing details.</b>
    With point guidance, <i>MangaNinja</i> can tackle many challenging cases, 
    especially when there are significant variations between the reference image and line art. 
    When dealing with multiple objects, point guidance can also effectively prevent color confusion.
  </p>
  <img class="summary-img" src="./static/results/challenging1-page.jpg" style="width:100%;">
  <p>
    <b>Visualization of multi-reference colorization.</b>
    <i>MangaNinja</i> enables users to select specific areas from multiple reference images through points, providing guidance for all elements in the line art. 
    Additionally, it effectively resolves conflicts between similar visual elements across the reference images.
  </p>
  <img class="summary-img" src="./static/results/challenging2-page.jpg" style="width:60%;">
  <p>
    <b>Visualization of colorization with discrepant reference.</b>
    <i>MangaNinja</i> uses points as guidance to achieve semantic color matching with fine control. 
    We believe this interactive colorization with discrepant references can effectively assist users in their colorization attempts and inspire new ideas.
  </p>
  <img class="summary-img" src="./static/results/challenging3-page.jpg" style="width:100%;">
</div>
<div class="content">
  <h2>BibTex</h2>
  <code> @article{liu2025manganinja,
  title={MangaNinja: Line Art Colorization with Precise Reference Following},
  author={Liu, Zhiheng and Cheng, Ka Leong and Chen, Xi and Xiao, Jie and Ouyang, Hao and Zhu, Kai and Liu, Yu and Shen, Yujun and Chen, Qifeng and Luo, Ping},
  journal={arXiv preprint arXiv:2501.08332},
  year={2025}
}</code> 
</div>
</body>
</html>
